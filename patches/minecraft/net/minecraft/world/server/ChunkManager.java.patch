--- a/net/minecraft/world/server/ChunkManager.java
+++ b/net/minecraft/world/server/ChunkManager.java
@@ -7,6 +7,7 @@
 import com.google.common.collect.Sets;
 import com.mojang.datafixers.DataFixer;
 import com.mojang.datafixers.util.Either;
+import fr.modcraftmc.forge.spigot.TrackingRange;
 import it.unimi.dsi.fastutil.ints.Int2ObjectMap;
 import it.unimi.dsi.fastutil.ints.Int2ObjectOpenHashMap;
 import it.unimi.dsi.fastutil.longs.Long2ObjectLinkedOpenHashMap;
@@ -100,7 +101,7 @@
    private final LongSet field_219254_h = new LongOpenHashSet();
    private final ServerWorld field_219255_i;
    private final ServerWorldLightManager field_219256_j;
-   private final ThreadTaskExecutor<Runnable> field_219257_k;
+   public final ThreadTaskExecutor<Runnable> field_219257_k;
    private final ChunkGenerator<?> field_219258_l;
    private final Supplier<DimensionSavedDataManager> field_219259_m;
    private final PointOfInterestManager field_219260_n;
@@ -368,6 +369,7 @@
       iprofiler.func_219895_b("chunk_unload");
       if (!this.field_219255_i.func_217402_u()) {
          this.func_223155_b(p_219204_1_);
+         if (this.field_219251_e.isEmpty()) net.minecraftforge.common.DimensionManager.unloadWorld(this.field_219255_i);
       }
 
       iprofiler.func_76319_b();
@@ -404,6 +406,7 @@
             if (this.field_219253_g.remove(p_219212_1_, p_219212_3_) && p_219185_5_ != null) {
                if (p_219185_5_ instanceof Chunk) {
                   ((Chunk)p_219185_5_).func_177417_c(false);
+                  net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.world.ChunkEvent.Unload((Chunk)p_219185_5_));
                }
 
                this.func_219229_a(p_219185_5_);
@@ -576,7 +579,7 @@
                chunk.func_177417_c(true);
                this.field_219255_i.func_147448_a(chunk.func_177434_r().values());
                List<Entity> list = null;
-               ClassInheritanceMultiMap<Entity>[] aclassinheritancemultimap = chunk.func_177429_s();
+               List<Entity>[] aclassinheritancemultimap = chunk.getEntityLists();
                int i = aclassinheritancemultimap.length;
 
                for(int j = 0; j < i; ++j) {
@@ -594,6 +597,7 @@
                if (list != null) {
                   list.forEach(chunk::func_76622_b);
                }
+               net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.world.ChunkEvent.Load(chunk));
             }
 
             return chunk;
@@ -679,6 +683,7 @@
 
             this.field_219255_i.func_217381_Z().func_230035_c_("chunkSave");
             CompoundNBT compoundnbt1 = ChunkSerializer.func_222645_a(this.field_219255_i, p_219229_1_);
+            net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.world.ChunkDataEvent.Save(p_219229_1_, p_219229_1_.getWorldForge() != null ? p_219229_1_.getWorldForge() : this.field_219255_i, compoundnbt1));
             this.func_219100_a(chunkpos, compoundnbt1);
             return true;
          } catch (Exception exception) {
@@ -711,6 +716,7 @@
 
    protected void func_219199_a(ServerPlayerEntity p_219199_1_, ChunkPos p_219199_2_, IPacket<?>[] p_219199_3_, boolean p_219199_4_, boolean p_219199_5_) {
       if (p_219199_1_.field_70170_p == this.field_219255_i) {
+         net.minecraftforge.event.ForgeEventFactory.fireChunkWatch(p_219199_4_, p_219199_5_, p_219199_1_, p_219199_2_, this.field_219255_i);
          if (p_219199_5_ && !p_219199_4_) {
             ChunkHolder chunkholder = this.func_219219_b(p_219199_2_.func_201841_a());
             if (chunkholder != null) {
@@ -753,7 +759,7 @@
             return p_225407_0_ instanceof Chunk ? Optional.of((Chunk)p_225407_0_) : Optional.empty();
          });
          csvwriter.func_225426_a(chunkpos.field_77276_a, chunkpos.field_77275_b, chunkholder.func_219299_i(), optional.isPresent(), optional.map(IChunk::func_201589_g).orElse((ChunkStatus)null), optional1.map(Chunk::func_217321_u).orElse((ChunkHolder.LocationType)null), func_225402_a(chunkholder.func_223492_c()), func_225402_a(chunkholder.func_219296_a()), func_225402_a(chunkholder.func_219297_b()), this.field_219267_u.func_225413_c(entry.getLongKey()), !this.func_219243_d(chunkpos), optional1.map((p_225401_0_) -> {
-            return Stream.of(p_225401_0_.func_177429_s()).mapToInt(ClassInheritanceMultiMap::size).sum();
+            return Stream.of(p_225401_0_.getEntityLists()).mapToInt(List::size).sum();
          }).orElse(0), optional1.map((p_225405_0_) -> {
             return p_225405_0_.func_177434_r().size();
          }).orElse(0));
@@ -1066,7 +1072,7 @@
       public EntityTracker(Entity p_i50468_2_, int p_i50468_3_, int p_i50468_4_, boolean p_i50468_5_) {
          this.field_219402_b = new TrackedEntity(ChunkManager.this.field_219255_i, p_i50468_2_, p_i50468_4_, p_i50468_5_, this::func_219391_a);
          this.field_219403_c = p_i50468_2_;
-         this.field_219404_d = p_i50468_3_;
+         this.field_219404_d = TrackingRange.getEntityTrackingRange(p_i50468_2_, p_i50468_3_);
          this.field_219405_e = SectionPos.func_218157_a(p_i50468_2_);
       }
 
