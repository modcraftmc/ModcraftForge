--- a/net/minecraft/client/gui/ResourceLoadProgressGui.java
+++ b/net/minecraft/client/gui/ResourceLoadProgressGui.java
@@ -6,6 +6,8 @@
 import java.io.InputStream;
 import java.util.Optional;
 import java.util.function.Consumer;
+
+import fr.modcraftmc.forge.utils.ColorUtils;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.renderer.texture.NativeImage;
 import net.minecraft.client.renderer.texture.SimpleTexture;
@@ -62,7 +64,7 @@
          }
 
          int l = MathHelper.func_76123_f((1.0F - MathHelper.func_76131_a(f - 1.0F, 0.0F, 1.0F)) * 255.0F);
-         func_238467_a_(p_230430_1_, 0, 0, i, j, field_238628_c_ | l << 24);
+         func_238467_a_(p_230430_1_, 0, 0, i, ColorUtils.backColor, ColorUtils.backColor & 0x00ffffff);
          f2 = 1.0F - MathHelper.func_76131_a(f - 1.0F, 0.0F, 1.0F);
       } else if (this.field_212977_e) {
          if (this.field_212974_b.field_71462_r != null && f1 < 1.0F) {
@@ -70,10 +72,10 @@
          }
 
          int i2 = MathHelper.func_76143_f(MathHelper.func_151237_a((double)f1, 0.15D, 1.0D) * 255.0D);
-         func_238467_a_(p_230430_1_, 0, 0, i, j, field_238628_c_ | i2 << 24);
+         func_238467_a_(p_230430_1_, 0, 0, i, ColorUtils.backColor, ColorUtils.backColor & 0x00ffffff);
          f2 = MathHelper.func_76131_a(f1, 0.0F, 1.0F);
       } else {
-         func_238467_a_(p_230430_1_, 0, 0, i, j, field_238627_b_);
+         func_238467_a_(p_230430_1_, 0, 0, i, j, ColorUtils.backColor);
          f2 = 1.0F;
       }
 
@@ -97,7 +99,10 @@
       int l1 = (int)((double)this.field_212974_b.func_228018_at_().func_198087_p() * 0.8325D);
       float f3 = this.field_212975_c.func_219555_b();
       this.field_212978_f = MathHelper.func_76131_a(this.field_212978_f * 0.95F + f3 * 0.050000012F, 0.0F, 1.0F);
+      net.minecraftforge.fml.client.ClientModLoader.renderProgressText();
       if (f < 1.0F) {
+
+
          this.func_238629_a_(p_230430_1_, i / 2 - k1, l1 - 5, i / 2 + k1, l1 + 5, 1.0F - MathHelper.func_76131_a(f, 0.0F, 1.0F));
       }
 
@@ -106,6 +111,7 @@
       }
 
       if (this.field_212979_g == -1L && this.field_212975_c.func_219554_d() && (!this.field_212977_e || f1 >= 2.0F)) {
+         this.field_212979_g = Util.func_211177_b(); // Moved up to guard against inf loops caused by callback
          try {
             this.field_212975_c.func_219556_e();
             this.field_212976_d.accept(Optional.empty());
@@ -113,7 +119,6 @@
             this.field_212976_d.accept(Optional.of(throwable));
          }
 
-         this.field_212979_g = Util.func_211177_b();
          if (this.field_212974_b.field_71462_r != null) {
             this.field_212974_b.field_71462_r.func_231158_b_(this.field_212974_b, this.field_212974_b.func_228018_at_().func_198107_o(), this.field_212974_b.func_228018_at_().func_198087_p());
          }
@@ -122,14 +127,10 @@
    }
 
    private void func_238629_a_(MatrixStack p_238629_1_, int p_238629_2_, int p_238629_3_, int p_238629_4_, int p_238629_5_, float p_238629_6_) {
-      int i = MathHelper.func_76123_f((float)(p_238629_4_ - p_238629_2_ - 2) * this.field_212978_f);
-      int j = Math.round(p_238629_6_ * 255.0F);
-      int k = ColorHelper.PackedColor.func_233006_a_(j, 255, 255, 255);
-      func_238467_a_(p_238629_1_, p_238629_2_ + 1, p_238629_3_, p_238629_4_ - 1, p_238629_3_ + 1, k);
-      func_238467_a_(p_238629_1_, p_238629_2_ + 1, p_238629_5_, p_238629_4_ - 1, p_238629_5_ - 1, k);
-      func_238467_a_(p_238629_1_, p_238629_2_, p_238629_3_, p_238629_2_ + 1, p_238629_5_, k);
-      func_238467_a_(p_238629_1_, p_238629_4_, p_238629_3_, p_238629_4_ - 1, p_238629_5_, k);
-      func_238467_a_(p_238629_1_, p_238629_2_ + 2, p_238629_3_ + 2, p_238629_2_ + i, p_238629_5_ - 2, k);
+      int length = MathHelper.func_76123_f((p_238629_4_ - p_238629_2_ - 1) * this.field_212978_f);
+      func_238467_a_(p_238629_1_, p_238629_2_ - 1, p_238629_3_ - 1, p_238629_4_ + 1, p_238629_5_ + 1,ColorUtils.getBarBackgroundColor(field_212978_f));
+      func_238467_a_(p_238629_1_, p_238629_2_, p_238629_3_, p_238629_4_, p_238629_5_, ColorUtils.backColor);
+      func_238467_a_(p_238629_1_, p_238629_2_ + 1, p_238629_3_ + 1, p_238629_2_ + length, p_238629_5_ - 1, ColorUtils.getProgressColor(field_212978_f));
    }
 
    public boolean func_212969_a() {
