--- a/net/minecraft/client/gui/ResourceLoadProgressGui.java
+++ b/net/minecraft/client/gui/ResourceLoadProgressGui.java
@@ -5,6 +5,8 @@
 import java.io.InputStream;
 import java.util.Optional;
 import java.util.function.Consumer;
+
+import fr.modcraftmc.modcraftforge.darkloading.Hooks;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.renderer.texture.NativeImage;
 import net.minecraft.client.renderer.texture.SimpleTexture;
@@ -58,7 +60,7 @@
          }
 
          int l = MathHelper.func_76123_f((1.0F - MathHelper.func_76131_a(f - 1.0F, 0.0F, 1.0F)) * 255.0F);
-         fill(0, 0, i, j, 16777215 | l << 24);
+         fill(0, 0, i, Hooks.backColor, Hooks.backColor & 0x00ffffff);
          f2 = 1.0F - MathHelper.func_76131_a(f - 1.0F, 0.0F, 1.0F);
       } else if (this.field_212977_e) {
          if (this.field_212974_b.field_71462_r != null && f1 < 1.0F) {
@@ -66,10 +68,10 @@
          }
 
          int j1 = MathHelper.func_76143_f(MathHelper.func_151237_a((double)f1, 0.15D, 1.0D) * 255.0D);
-         fill(0, 0, i, j, 16777215 | j1 << 24);
-         f2 = MathHelper.func_76131_a(f1, 0.0F, 1.0F);
+         fill(0, 0, i, Hooks.backColor, Hooks.backColor & 0x00ffffff);
+                 f2 = MathHelper.func_76131_a(f1, 0.0F, 1.0F);
       } else {
-         fill(0, 0, i, j, -1);
+         fill(0, 0, i, j, Hooks.backColor);
          f2 = 1.0F;
       }
 
@@ -81,6 +83,7 @@
       this.blit(k1, i1, 0, 0, 256, 256);
       float f3 = this.field_212975_c.func_219555_b();
       this.field_212978_f = MathHelper.func_76131_a(this.field_212978_f * 0.95F + f3 * 0.050000012F, 0.0F, 1.0F);
+      net.minecraftforge.fml.client.ClientModLoader.renderProgressText();
       if (f < 1.0F) {
          this.func_228181_a_(i / 2 - 150, j / 4 * 3, i / 2 + 150, j / 4 * 3 + 10, 1.0F - MathHelper.func_76131_a(f, 0.0F, 1.0F));
       }
@@ -90,6 +93,7 @@
       }
 
       if (this.field_212979_g == -1L && this.field_212975_c.func_219554_d() && (!this.field_212977_e || f1 >= 2.0F)) {
+         this.field_212979_g = Util.func_211177_b(); // Moved up to guard against inf loops caused by callback
          try {
             this.field_212975_c.func_219556_e();
             this.field_212976_d.accept(Optional.empty());
@@ -97,7 +101,6 @@
             this.field_212976_d.accept(Optional.of(throwable));
          }
 
-         this.field_212979_g = Util.func_211177_b();
          if (this.field_212974_b.field_71462_r != null) {
             this.field_212974_b.field_71462_r.init(this.field_212974_b, this.field_212974_b.func_228018_at_().func_198107_o(), this.field_212974_b.func_228018_at_().func_198087_p());
          }
@@ -106,10 +109,20 @@
    }
 
    private void func_228181_a_(int p_228181_1_, int p_228181_2_, int p_228181_3_, int p_228181_4_, float p_228181_5_) {
-      int i = MathHelper.func_76123_f((float)(p_228181_3_ - p_228181_1_ - 1) * this.field_212978_f);
+
+
+      int length = MathHelper.func_76123_f((p_228181_3_ - p_228181_1_ - 1) * this.field_212978_f);
+      fill(p_228181_1_ - 1, p_228181_2_ - 1, p_228181_3_ + 1, p_228181_4_ + 1,Hooks.getBarBackgroundColor(field_212978_f));
+      fill(p_228181_1_, p_228181_2_, p_228181_3_, p_228181_4_, Hooks.backColor);
+      fill(p_228181_1_ + 1, p_228181_2_ + 1, p_228181_1_ + length, p_228181_4_ - 1, Hooks.getProgressColor(field_212978_f));
+
+      /*
+      int i = MathHelper.ceil((float)(p_228181_3_ - p_228181_1_ - 1) * this.progress);
       fill(p_228181_1_ - 1, p_228181_2_ - 1, p_228181_3_ + 1, p_228181_4_ + 1, -16777216 | Math.round((1.0F - p_228181_5_) * 255.0F) << 16 | Math.round((1.0F - p_228181_5_) * 255.0F) << 8 | Math.round((1.0F - p_228181_5_) * 255.0F));
       fill(p_228181_1_, p_228181_2_, p_228181_3_, p_228181_4_, -1);
-      fill(p_228181_1_ + 1, p_228181_2_ + 1, p_228181_1_ + i, p_228181_4_ - 1, -16777216 | (int)MathHelper.func_219799_g(1.0F - p_228181_5_, 226.0F, 255.0F) << 16 | (int)MathHelper.func_219799_g(1.0F - p_228181_5_, 40.0F, 255.0F) << 8 | (int)MathHelper.func_219799_g(1.0F - p_228181_5_, 55.0F, 255.0F));
+      fill(p_228181_1_ + 1, p_228181_2_ + 1, p_228181_1_ + i, p_228181_4_ - 1, -16777216 | (int)MathHelper.lerp(1.0F - p_228181_5_, 226.0F, 255.0F) << 16 | (int)MathHelper.lerp(1.0F - p_228181_5_, 40.0F, 255.0F) << 8 | (int)MathHelper.lerp(1.0F - p_228181_5_, 55.0F, 255.0F));
+
+       */
\ No newline at end of file
    }
 
    public boolean func_212969_a() {
